# 第7回課題

## 課題で構築したシステムのセキュリティリスクについて

### 想定されるリスクと対策について

### 1. HTTP通信　(脆弱性)
WebブラウザとWebサーバー間でデータの交換を行う(通信)際に使用されている。

しかし通信は暗号化されておらず、住所やクレジットカード情報などの個人情報を入力するシーンがあれば第三者によって抜き取られてしまうリスクがある。

### __対策__

* __SSL通信__ を使い、セキュリティをより強固にする。
* 信頼性が高い第三者機関から発行されたSSL証明書を導入することでデータを暗号化し、盗み見の防御やデータが正確であるかを検証してくれる。
* httpsを利用していないページを開く際に警告を出すウィルス対策ソフトや、Chrome上でできるhttpのサイトが開けないようにする設定も有効。

#### __その他SSL証明書導入のメリット__

1. サイトへのアクセス時に警告の表示がされないためユーザーから敬遠されにくい。
2. Googleなどの検索サイトにおいて検索結果上位に表示されやすくなる。

### 2. DDos(Distributed Denial of Service)攻撃

複数のシステムから大量のアクセスを行い、サーバーに負荷をかけることでサービス停止を狙う攻撃。

処理したリクエスト量によっては、AWS利用料が増えることもあり得る。

このような利用料の増加によって利用者の経済的損失を与えることを目的とした攻撃、__EDos(Economic Dos)__ にも注意が必要。

### __対策__
* #### __AWS Shield__ の使用

* 常にモニタリング通知、攻撃の保護をして被害を最小限に抑える効果がある。

#### `AWS Shield Standard` 
	 
* OSI参照モデルのL3（ネットワーク層）とL4（トランスポート層）へのDDoS攻撃に対して機能する。
* 無料で利用可能
* しかし、HTTP/HTTPSなどを利用したL7アプリケーション層への攻撃は防御できず、AWS Shieldだけでは他の脆弱性を狙った攻撃の保護はできない

#### `AWS Shield Advanced`

* L3とL4への攻撃を対策に加え、L7(アプリケーション層)へのDDoS攻撃も防御。
* SRTというDDoS攻撃への対応を専門とするセキュリティエンジニアによるサポートが受けられる。
* 額料金が3,000ドルと高額

 参照 [AWS Shield 料金](https://aws.amazon.com/jp/shield/pricing/)

* #### __AWS WAF__ の使用
* L7の防御に特化したセキュリティサービス。
* AWS WAFはインフラ部分がAWS側で管理されており、WAF自体の管理やメンテナンスの必要がない。よりセキュリティ対策に注力できる。
* AWSの他のサービスと簡単に統合可。
    * WebアプリケーションをEC2上で実行する場合、その前段に配置されるALBに適用すると、ALB配下にあるEC2の保護が可能になる。
* CloudFront、API Gatewayなどにも適用可能。 
* ※L3やL4へのDDoS攻撃への対策はできないため、AWS Shield Standardとの併用が有効。


__AWS Shield保護対象__
||AWS WAF| AWS Shield Standard| AWS Shield Advanced|
|:--:|:--:|:--:|:--:|
|L3ネットワーク層|×|⚪︎|⚪︎|
|L4ネットワーク層|×|⚪︎|⚪︎|
|L7ネットワーク層|⚪︎|×|⚪︎|

### 3. 認証情報の流出
アクセスキー、ルートユーザーのメールアドレスやパスワード情報等をGitHubなどのパブリックな環境に公開してしまうことで被害を受ける。

### __対策__ 
* IAMユーザーを使用。ログインの際はMFA認証を使い、本人以外ログインできないようにする。
* アプリケーションへのログイン情報を知る人を減らす、暗号化して暗号化の際に使用した鍵は保護する。
* #### GuardDutyの使用
* 有効化することでAWS上で発生する不正な動作を検知する。
* CloudTrailログ、VPC Flow Logs、DNSログなどを解析。これにより、疑わしいアクティビティや異常なパターンを検出する。
    * ルートユーザーの使用、IAMアクセスキーの大量利用などの情報が対象となる。
* 検知した内容はリアルタイムのものではないため、Amazon SNSなどとの組み合わせが好ましい。

### 感想
* 多種多様なセキュリティサービスがあり、仕事をしていくにあたりそれぞれの役割を正しく把握することの大切さを学んだ。
* 無料で使用できるサービスもあるため、可能なものは手を動かしながら学び、身につけていきたい。
* 全ての攻撃を完全に防ぎきることはできない。あらゆるリスクを想定し、受容・低減・移転・回避を念頭に対処できよう、今後も学習に励みたい。